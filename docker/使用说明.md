# 使用docker镜像

这个docker镜像大小10m左右，可以直接使用，也可以自己build

## 1.运行docker命令

```bash

> /home/openp2p/config.json && docker run --restart=on-failure:3 --network host --name myopenp2p1 -d -v /home/openp2p/config.json:/config.json -e HostName="随便一个名字" -e token="你的token" bd111/openp2p:3.4.0_v1

```

在运行命令前，修改两个参数，一个是token，一个是HostName，token是你在openp2p官网申请的，HostName是你自己随便起的一个名字。

首先到openp2p官网(<https://console.openp2p.cn/profile>) 注册一个账号，系统会自动生成一个token。具体操作如下图所示：

![image](/doc/images/get_token.png)

假设你的token是：1234567890，你的HostName是：openp2p14，那么你的运行命令就是：

```bash
> /home/openp2p/config.json && docker run --restart=on-failure:3 --network host --name myopenp2p14 -d -v /home/openp2p/config.json:/config.json -e HostName="openp2p14" -e token="1234567890" bd111/openp2p:3.4.0_v1

```

复制代码到终端运行，如果没有报错，那么你的openp2p就已经运行起来了。

![image](/doc/images/docker_run_openp2p.png)

我们现在就可以到openp2p官网(<https://console.openp2p.cn/profile>) 查看我们的节点是否已经运行起来了。

![image](/doc/images/openp2p_is_run.png)

## 2.例子

我们的openp2p已经运行起来了，现在我们就可以使用它了。我们以一个例子来说明，假设我们有一个内网的服务器，它的ip是192.168.1.5(如果要访问本机的服务，那么就是ip就是 localhost)，服务端口是5000，我们想让外网另一台已经部署了openp2p的机子访问这个服务器，那我们如下图所示操作：

![image](/doc/images/openp2p_app.png)

那么此时，我们在外网的机子上访问：<http://127.0.0.1:6666/> 就可以了。

## 3.自行构建docker镜像

假定我们dockerfile文件的名称是openp2p.dockerfile，那么我们可以使用如下命令构建镜像：

```bash
docker build -f openp2p.dockerfile -t openp2p:busybox_3.4.0_cs .

```
